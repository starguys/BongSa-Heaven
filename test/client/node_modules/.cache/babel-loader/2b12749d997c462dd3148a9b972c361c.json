{"ast":null,"code":"var _jsxFileName = \"/Users/lcm/Downloads/BongSa-Heaven/test/client/src/components/uploading.js\";\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nconst BASE_URL = \"http://localhost:8080\";\nexport default function Upload() {\n  const [content, setContent] = useState(\"\");\n  const [uploadedImg, setUploadedImg] = useState({\n    fileName: \"\",\n    fillPath: \"\"\n  });\n\n  const onChange = e => {\n    setContent(e.target.files[0]);\n  };\n\n  const onSubmit = e => {\n    // e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"img\", content);\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    axios.post(\"http://localhost:8080/auth/image\", formData, config).then(res => {\n      const {\n        fileName\n      } = res.data;\n      console.log(fileName);\n      setUploadedImg({\n        fileName,\n        filePath: `${BASE_URL}/img/${fileName}`\n      });\n      alert(\"The file is successfully uploaded\");\n    }).catch(err => {\n      console.error(err);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }, uploadedImg ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"img\", {\n    src: uploadedImg.filePath,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }, uploadedImg.fileName)) : \"\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, \"Upload\")));\n}","map":{"version":3,"sources":["/Users/lcm/Downloads/BongSa-Heaven/test/client/src/components/uploading.js"],"names":["React","useState","axios","BASE_URL","Upload","content","setContent","uploadedImg","setUploadedImg","fileName","fillPath","onChange","e","target","files","onSubmit","formData","FormData","append","config","headers","post","then","res","data","console","log","filePath","alert","catch","err","error"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,MAAMC,QAAQ,GAAG,uBAAjB;AAEA,eAAe,SAASC,MAAT,GAAkB;AAC/B,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBL,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACM,WAAD,EAAcC,cAAd,IAAgCP,QAAQ,CAAC;AAC7CQ,IAAAA,QAAQ,EAAE,EADmC;AAE7CC,IAAAA,QAAQ,EAAE;AAFmC,GAAD,CAA9C;;AAKA,QAAMC,QAAQ,GAAGC,CAAC,IAAI;AACpBN,IAAAA,UAAU,CAACM,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAV;AACD,GAFD;;AAGA,QAAMC,QAAQ,GAAGH,CAAC,IAAI;AACpB;AACA,UAAMI,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,KAAhB,EAAuBb,OAAvB;AAEA,UAAMc,MAAM,GAAG;AAAEC,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB;AAAX,KAAf;AAEAlB,IAAAA,KAAK,CACFmB,IADH,CACQ,kCADR,EAC4CL,QAD5C,EACsDG,MADtD,EAEGG,IAFH,CAEQC,GAAG,IAAI;AACX,YAAM;AAAEd,QAAAA;AAAF,UAAec,GAAG,CAACC,IAAzB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYjB,QAAZ;AACAD,MAAAA,cAAc,CAAC;AAAEC,QAAAA,QAAF;AAAYkB,QAAAA,QAAQ,EAAG,GAAExB,QAAS,QAAOM,QAAS;AAAlD,OAAD,CAAd;AACAmB,MAAAA,KAAK,CAAC,mCAAD,CAAL;AACD,KAPH,EAQGC,KARH,CAQSC,GAAG,IAAI;AACZL,MAAAA,OAAO,CAACM,KAAR,CAAcD,GAAd;AACD,KAVH;AAWD,GAlBD;;AAoBA,sBACE,uDACE;AAAM,IAAA,QAAQ,EAAEf,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGR,WAAW,gBACV,uDACE;AAAK,IAAA,GAAG,EAAEA,WAAW,CAACoB,QAAtB;AAAgC,IAAA,GAAG,EAAC,EAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKpB,WAAW,CAACE,QAAjB,CAFF,CADU,GAMV,EAPJ,eASE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,QAAQ,EAAEE,QAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,eAUE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAVF,CADF,CADF;AAiBD","sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nconst BASE_URL = \"http://localhost:8080\";\n\nexport default function Upload() {\n  const [content, setContent] = useState(\"\");\n  const [uploadedImg, setUploadedImg] = useState({\n    fileName: \"\",\n    fillPath: \"\"\n  })\n\n  const onChange = e => {\n    setContent(e.target.files[0]);\n  };\n  const onSubmit = e => {\n    // e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"img\", content); \n\n    const config = { headers: {'content-type': 'multipart/form-data'}}\n\n    axios\n      .post(\"http://localhost:8080/auth/image\", formData, config)\n      .then(res => {\n        const { fileName } = res.data;\n        console.log(fileName);\n        setUploadedImg({ fileName, filePath: `${BASE_URL}/img/${fileName}` });\n        alert(\"The file is successfully uploaded\");\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  };\n\n  return (\n    <>\n      <form onSubmit={onSubmit}>\n        {uploadedImg ? (\n          <>\n            <img src={uploadedImg.filePath} alt=\"\" />\n            <h3>{uploadedImg.fileName}</h3>\n          </>\n        ) : (\n          \"\"\n        )}\n        <input type=\"file\" onChange={onChange} />\n        <button type=\"submit\">Upload</button>\n      </form>\n    </>\n  )\n\n}"]},"metadata":{},"sourceType":"module"}